<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="/testem/mocha.css"/>
    <script type="application/javascript" src="/testem/mocha.js"></script>
    <script type="application/javascript">
      mocha.setup({
        ui: 'bdd',
        bail: false
      })
    </script>
    <script type="application/javascript" src="/testem.js"></script>
    <script type="application/javascript" src="/node_modules/requirejs/require.js"></script>
  </head>
  <body>
    <div id="mocha"></div>
    <script type="application/javascript">
      (function () {
        'use strict';

        var removeExt = (function () {
          var extPattern = /\.js$/;
          return function removeExt(filename) {
            return filename.replace(extPattern, '');
          };
        }());

        var files = [];
        {{#serve_files}}files.push(removeExt("../{{src}}"));
        {{/serve_files}}

        requirejs.config({
          baseUrl: '../',
          paths: {
            'chai': 'node_modules/chai/chai',
            'sinon-chai': 'node_modules/sinon-chai/lib/sinon-chai',
            'sinon': 'node_modules/sinon/pkg/sinon',
            'shared': 'test/shared',
            'sulfur': 'src/sulfur'
          },
          shim: {
            'sinon': {
              exports: 'sinon'
            }
          },
          deps: files,
          callback: function () {
            mocha.run();
          }
        });
      }());
    </script>
  </body>
</html>
